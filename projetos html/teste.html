<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Registro</title>
    <style>

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body, html {
            width: 100%;
            height: 100%;
            background-color: #f0f0f0; /* Cor de fundo clara para a página */
        }

        .container-entrada {
            width: 90%;
            margin: 20px auto;
        }

        button {
            padding: 10px 20px; /* Espaçamento interno */
            margin: 40px 40px;
            background-color: #d57106; /* Cor de fundo verde */
            color: white; /* Cor do texto */
            font-size: 16px; /* Tamanho do texto */
            border: none; /* Sem borda */
            border-radius: 8px; /* Bordas arredondadas */
            cursor: pointer; /* Cursor em forma de ponteiro */
            transition: background-color 0.3s, transform 0.2s; /* Transições suaves para o hover */
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* Sombra sutil para efeito 3D */
            outline: none; /* Remove o contorno ao focar */

        }

        button:hover {
            background-color: #d9922f; /* Cor de fundo mais escura ao passar o mouse */
            transform: scale(1.05); /* Efeito de crescimento sutil */
        }


        .tabela-brasileira {
            width: 100%;
            background-color: white;
            border-collapse: collapse;
        }
        .tabela-brasileira th, .tabela-brasileira td {
            padding: 10px;
            border: 1px solid #ccc;
        }
        .tabela-brasileira label {
            display: block;
            color: #00394b;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .tabela-brasileira input, .tabela-brasileira textarea {
            width: 95%;
            padding: 8px;
            box-shadow: 1px 1px 4px #ccc;
            border: 1px solid #ddd;
            box-sizing: border-box;
        }

        .tabela-american {
            width: 100%;
            background-color: white;
            border-collapse: collapse;
        }
        .tabela-american th, .tabela-american td {
            padding: 10px;
            border: 1px solid #ccc;
        }
        .tabela-american label {
            display: block;
            color: #00394b;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .tabela-american input, .tabela-american textarea {
            width: 95%;
            padding: 8px;
            box-shadow: 1px 1px 4px #ccc;
            border: 1px solid #ddd;
            box-sizing: border-box;
        }
    </style>


</head>

<body>
    <div class="container-entrada" id="exportContent">
               
        <!--Tabela brasileira -->
        
    <table class="tabela-brasileira">
        <!-- Campos de texto, números e datas com validações específicas -->
        <tr>
            <td>
                <label for="nome-registrado">Nome do Registrado</label>
                <input type="text" id="nome-registrado" oninput="this.value = this.value.toUpperCase().replace(/[^a-zA-Z\s]/g, '')" placeholder="Apenas letras">
            </td>
            <td>
                <label for="cartao-seguranca-social">Cartão de Segurança Social</label>
                <input type="text" id="cartao-seguranca-social" pattern="\d{3}\.\d{3}\.\d{3}-\d{2}" placeholder="000.000.000-00">
            </td>
       </tr>
       <tr>     
            <td>
                <label for="numero-registro">Número do Registro</label>
                <input type="text" id="numero-registro" pattern="\d*" placeholder="Apenas números">
            </td>

            <td>
                <label for="matricula">Matrícula</label>
                <input type="text" id="matricula" pattern="\d*" placeholder="Apenas números">
            </td>
           

        </tr>
        <tr>
            <td>
                <label for="data-nascimento">Data de Nascimento</label>
                <input type="text" id="data-nascimento" onblur="formatDate(this);" placeholder="dd/MM/aaaa">
            </td>

            <td>
                <label for="hora-nascimento">Hora de Nascimento</label>
                <input type="time" id="hora-nascimento">
            </td>
        </tr>
        <tr>
            <td>
                <label for="cidade-estado-nascimento">Cidade e Estado de Nascimento</label>
                <input type="text" id="cidade-estado-nascimento">
            </td>
            
            <td>
                <label for="cidade-estado-registro">Cidade e Estado do Registro</label>
                <input type="text" id="cidade-estado-registro">
            </td>
        </tr>
        <tr>
            <td>
                <label for="local-nascimento">Local de Nascimento</label>
                <input type="text" id="local-nascimento">
            </td>

            <td>
                <label for="sexo">Sexo</label>
                <input type="text" id="sexo" maxlength="1" pattern="[MF]" placeholder="M ou F">
            </td>
        </tr>
        <tr>
            <td>
                <label for="tipo-documento">Tipo de Documento</label>
                <input type="text" id="tipo-documento">
            </td>
            <td>
                <label for="numero">Número do Documento</label>
                <input type="text" id="numero" pattern="\d*">
            </td>
           
        </tr>
        <tr>
            <td>
                <label for="data-emissao">Data de Emissão</label>
                <input type="text" id="data-emissao" onblur="formatDate(this);" placeholder="dd/MM/aaaa">
            </td>

        </tr>
       
        <tr>
            <td>
                <label for="nome-pai">Nome do Pai</label>
                <input type="text" id="nome-pai">
            </td>
            <td>
                <label for="nacionalidade-pai">Nacionalidade do Pai</label>
                <select id="nacionalidade-pai">
                    <!-- Opções preenchidas dinamicamente ou manualmente aqui -->
                    <option value="Brasileiro" selected>Brasileiro</option>
                    <option value="Outra">Outra</option>
                </select>
            </td>
        </tr>
        <!-- Adicionar restante dos campos com regras aplicadas -->

        <tr>
            <td>
                <label for="idade-pai">Idade do Pai na Data do Nascimento</label>
                <input type="number" id="idade-pai" min="10" max="100" placeholder="10 a 100 anos">
            </td>
            <td>
                <label for="profissao-pai">Profissão do Pai</label>
                <input type="text" id="profissao-pai">
            </td>
        </tr>
        <tr>
            <td>
                <label for="nome-mae">Nome da Mãe</label>
                <input type="text" id="nome-mae">
            </td>
            <td>
                <label for="nacionalidade-mae">Nacionalidade da Mãe</label>
                <select id="nacionalidade-mae">
                    <option value="Brasileiro" selected>Brasileira</option>
                    <option value="Outra">Outra</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <label for="idade-mae">Idade da Mãe na Data do Nascimento</label>
                <input type="number" id="idade-mae" min="10" max="100" placeholder="10 a 100 anos">
            </td>
            <td>
                <label for="profissao-mae">Profissão da Mãe</label>
                <input type="text" id="profissao-mae">
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <label for="avos-paternos">Avós Paternos</label>
                <input type="text" id="avos-paternos">
            </td>
           
        </tr>
        <tr>
            <td colspan="2">
                <label for="avos-maternos">Avós Maternos</label>
                <input type="text" id="avos-maternos">
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <label for="testemunhas">Testemunhas</label>
                <input type="text" id="testemunhas">
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <label for="observacoes">Observações</label>
                <textarea id="observacoes" rows="4"></textarea>
            </td>
        </tr>
        <tr>
           
            <td>
                <label for="gemeos">Gêmeos</label>
                <select id="gemeos" onchange="handleTwins(this);">
                    <option value="Não">Não</option>
                    <option value="Sim">Sim</option>
                </select>
            </td>
            <td>
                <label for="nome-registro-gemeos">Nome e Registro dos Gêmeos</label>
                <input type="text" id="nome-registro-gemeos" disabled>
            </td>

        </tr>
        <tr>
            <td>
                <label for="data-registro">Data de Registro</label>
                <input type="date" id="data-registro">
            </td>
        </tr>
        <tr>
            <td>
                <label for="notas-alteracoes">Notas alterações a adicionar</label>
                <textarea id="notas-alteracoes" rows="2"></textarea>
            </td>
            <td>
                <label for="notas-registro">Notas do Registro</label>
                <textarea id="notas-registro" rows="2"></textarea>
            </td>
           
        </tr>
        
    
    </table>     

        <button onclick="transferAndTransformData()">Preencher</button>
    
        <!--Tabela americana -->

        <table class="tabela-american">
            <tr>
                <td>
                    <label for="name">Name</label>
                    <input type="text" id="name" placeholder="Full name">
                </td>
                <td>
                    <label for="social-security-card">Social Security Card</label>
                    <input type="text" id="social-security-card" value="075-89-4956">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="registration">Registration</label>
                    <input type="text" id="registration" placeholder="Registration info">
                </td>  
                <td colspan="2">
                    <label for="date-time-birth">Date and Time of Birth</label>
                    <input type="datetime-local" id="date-time-birth" value="1983-07-25T05:30">
                </td>
                
            </tr>
            <tr>
                <td>
                    <label for="city-state-birth">City and State of Birth</label>
                    <input type="text" id="city-state-birth" placeholder="City, State">
                </td>
                <td>
                    <label for="city-state-registration">City and State of Registration</label>
                    <input type="text" id="city-state-registration" placeholder="City, State">
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <label for="place-birth-city-state">Place of Birth, City and State</label>
                    <input type="text" id="place-birth-city-state" placeholder="City, State">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="gender">Gender</label>
                    <input type="text" id="gender" placeholder="Gender">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="father">Father</label>
                    <input type="text" id="father" placeholder="Father's name">
                </td>
                <td>
                    <label for="mother">Mother</label>
                    <input type="text" id="mother" placeholder="Mother's name">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="paternal-grandparents">Paternal Grandparents</label>
                    <input type="text" id="paternal-grandparents" placeholder="Grandparents' names">
                </td>
                <td>
                    <label for="maternal-grandparents">Maternal Grandparents</label>
                    <input type="text" id="maternal-grandparents" placeholder="Grandparents' names">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="twins">Twins</label>
                    <input type="text" id="twins" placeholder="Yes/No">
                </td>
                <td>
                    <label for="name-registration-twins">Name and Registration of Twins</label>
                    <input type="text" id="name-registration-twins" placeholder="Details if twins">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="date-registration">Date of Registration</label>
                    <input type="date" id="date-registration">
                </td>
                <td>
                    <label for="notes-amendments">Notes Amendments to Add</label>
                    <textarea id="notes-amendments" rows="2"></textarea>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="issuance-date">Issuance Date</label>
                    <input type="date" id="issuance-date">
                </td>
            </tr>        

            <tr>
                <td colspan="2">
                    <label for="registration-notes">Registration Notes</label>
                    <textarea id="registration-notes" rows="2"></textarea>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="document-type">Document Type</label>
                    <input type="text" id="document-type" placeholder="Type of document">
                </td>
                <td>
                    <label for="document-number">Document Number</label>
                    <input type="text" id="number" placeholder="Document number">
                </td>
            </tr>
            <tr>

                <td>
                    <label for="registration-number-of-alive-birth">Registration Number of Alive Birth</label>
                    <input type="text" id="registration-number" placeholder="Enter registration number">
                </td>
 
            </tr>

            <tr>
                <td colspan="2">
                    <label for="observations">Observations</label>
                    <textarea id="observations" rows="2"></textarea>
                </td>
            </tr>
        </table>    

        <button onclick="salvarDados()">Exportar</button>
    
    </div>


<script>

    // Função para formatar a data para o formato dd/MM/aaaa
function formatDate(input) {
    var date = input.value.trim();
    if (!date) return;

    var parts = date.split('/').reverse();
    if (parts.length === 3) {
        var formattedDate = new Date(parts.join('-'));
        if (!isNaN(formattedDate.getTime())) {
            input.value = ('0' + formattedDate.getDate()).slice(-2) + '/' +
                          ('0' + (formattedDate.getMonth() + 1)).slice(-2) + '/' +
                          formattedDate.getFullYear();
        } else {
            alert("Data inválida. Por favor, use o formato dd/MM/aaaa.");
            input.value = '';
        }
    } else {
        alert("Por favor, insira a data no formato dd/MM/aaaa.");
        input.value = '';
    }
}

// Função para lidar com a seleção de gêmeos
function handleTwins(select) {
    var field = document.getElementById('nome-registro-gemeos');
    if (select.value === "Sim") {
        field.disabled = false;
    } else {
        field.disabled = true;
        field.value = ''; // Limpar o campo quando não for relevante
    }
}

// Função para forçar letras maiúsculas e remover caracteres não alfabéticos
function forceUppercaseAndLettersOnly(input) {
    input.value = input.value.toUpperCase().replace(/[^a-zA-Z\s]/g, '');
}

// Associar eventos a elementos
document.addEventListener('DOMContentLoaded', function() {
    var nomeRegistrado = document.getElementById('nome-registrado');
    var sexo = document.getElementById('sexo');
    var dataEmissao = document.getElementById('data-emissao');
    var dataNascimento = document.getElementById('data-nascimento');
    var gemeosSelect = document.getElementById('gemeos');

    nomeRegistrado.addEventListener('input', function() {
        forceUppercaseAndLettersOnly(this);
    });

    sexo.addEventListener('input', function() {
        this.value = this.value.toUpperCase();
    });

    dataEmissao.addEventListener('blur', function() {
        formatDate(this);
    });

    dataNascimento.addEventListener('blur', function() {
        formatDate(this);
    });

    gemeosSelect.addEventListener('change', function() {
        handleTwins(this);
    });
});

function transferAndTransformData() {
    // Função para converter a data do formato brasileiro para o formato americano
    function formatDateBRtoUS(date) {
        const parts = date.split('/');
        return `${parts[2]}-${parts[1]}-${parts[0]}`; // yyyy-MM-dd
    }

    // Captura dos dados da tabela brasileira
    const numeroRegistro = document.getElementById('numero-registro').value;
    const dataEmissao = document.getElementById('data-emissao').value;
    const nomeRegistrado = document.getElementById('nome-registrado').value;
    const sexo = document.getElementById('sexo').value;
    const dataNascimento = document.getElementById('data-nascimento').value;
    const horaNascimento = document.getElementById('hora-nascimento').value;
    const localNascimento = document.getElementById('local-nascimento').value;
    const cidadeEstadoNascimento = document.getElementById('cidade-estado-nascimento').value;
    const nomePai = document.getElementById('nome-pai').value;
    const nomeMae = document.getElementById('nome-mae').value;
    const avosPaternos = document.getElementById('avos-paternos').value;
    const avosMaternos = document.getElementById('avos-maternos').value;
    const gemeos = document.getElementById('gemeos').value;
    const nomeRegistroGemeos = document.getElementById('nome-registro-gemeos').value;
    const dataRegistro = document.getElementById('data-registro').value;
    const observacoes = document.getElementById('observacoes').value;
    const notasRegistro = document.getElementById('notas-registro').value;
    const tipoDocumento = document.getElementById('tipo-documento').value;
    const numero = document.getElementById('numero').value;
    const matricula = document.getElementById('matricula').value;
    const cidadeEstadoRegistro = document.getElementById('cidade-estado-registro').value;

    // Preenchimento dos dados na tabela americana
    document.getElementById('registration-number').value = numeroRegistro;
    document.getElementById('issuance-date').value = formatDateBRtoUS(dataEmissao);
    document.getElementById('name').value = nomeRegistrado;
    document.getElementById('gender').value = sexo;
    document.getElementById('date-time-birth').value = formatDateBRtoUS(dataNascimento) + 'T' + horaNascimento;
    document.getElementById('place-birth-city-state').value = localNascimento + ', ' + cidadeEstadoNascimento;
    document.getElementById('father').value = nomePai;
    document.getElementById('mother').value = nomeMae;
    document.getElementById('paternal-grandparents').value = avosPaternos;
    document.getElementById('maternal-grandparents').value = avosMaternos;
    document.getElementById('twins').value = gemeos === "Sim" ? "Yes" : "No";
    document.getElementById('name-registration-twins').value = nomeRegistroGemeos;
    document.getElementById('date-registration').value = formatDateBRtoUS(dataRegistro);
    document.getElementById('observations').value = observacoes;
    document.getElementById('registration-notes').value = notasRegistro;
    document.getElementById('document-type').value = tipoDocumento;
    document.getElementById('document-number').value = numero;
    document.getElementById('registration').value = matricula;
    document.getElementById('city-state-registration').value = cidadeEstadoRegistro;
}

async function salvarDados() {
    let dados = [];
    let camposNaoEncontrados = [];

    // Lista de IDs dos campos e seus respectivos rótulos para capturar os dados corretamente e na ordem desejada
    const fields = [
        { id: 'registration-number', label: 'REGISTRATION NUMBER OF ALIVE BIRTH'},    
        { id: 'issuance-date', label: 'ISSUANCE DATE' },
        { id: 'name', label: 'NAME' },
        { id: 'gender', label: 'GENDER' },
        { id: 'date-time-birth', label: 'DATE AND TIME OF BIRTH' },
        { id: 'place-birth-city-state', label: 'PLACE OF BIRTH, CITY AND STATE' },
        { id: 'father', label: 'FATHER' },
        { id: 'mother', label: 'MOTHER' },
        { id: 'paternal-grandparents', label: 'PATERNAL GRANDPARENTS' },
        { id: 'maternal-grandparents', label: 'MATERNAL GRANDPARENTS' },
        { id: 'twins', label: 'TWINS' },
        { id: 'name-registration-twins', label: 'NAME AND REGISTRATION OF TWINS' },
        { id: 'date-registration', label: 'DATE OF REGISTRATION' },
        { id: 'registration-notes', label: 'REGISTRATION NOTES' },
        { id: 'document-type', label: 'DOCUMENT TYPE' },
        { id: 'number', label: 'DOCUMENT NUMBER' },
        { id: 'registration', label: 'REGISTRATION' },
        { id: 'city-state-registration', label: 'CITY AND STATE OF REGISTRATION' },
        { id: 'observations', label: 'OBSERVATIONS' },
        { id: 'social-security-card', label: 'SOCIAL SECURITY CARD' },
        { id: 'notes-amendments', label: 'NOTES AMENDMENTS TO ADD' },
        { id: 'city-state-birth', label: 'CITY AND STATE OF BIRTH' }
    ];

    // Iterar sobre a lista de IDs e labels para capturar os valores dos inputs
    fields.forEach(({ id, label }) => {
        const input = document.getElementById(id);
        if (input) {
            let value = input.value.trim() || 'empty'; // Usar 'empty' se o campo estiver vazio
            dados.push(`${label}: ${value}`);
        } else {
            camposNaoEncontrados.push(label); // Adicionar ao array de campos não encontrados
        }
    });

    const conteudo = dados.join('\n');

    try {
        const handle = await window.showSaveFilePicker({
            suggestedName: 'input.txt',
            types: [{description: 'Text Files', accept: {'text/plain': ['.txt']}}],
        });
        const writable = await handle.createWritable();
        await writable.write(conteudo);
        await writable.close();
        alert('Dados salvos com sucesso!');
    } catch (err) {
        console.error('Erro ao salvar o arquivo:', err);
    }

    // Emitir um alerta se houver campos não encontrados
    if (camposNaoEncontrados.length > 0) {
        alert('Campos não encontrados: ' + camposNaoEncontrados.join(', '));
    }
}



</script>


</body>
</html>
